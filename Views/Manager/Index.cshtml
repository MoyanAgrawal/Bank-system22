@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Employee.cshtml";
}

<ul class="nav nav-pills nav-fill mt-2 gap-2 mb-3">
    <li class="nav-item"><a class="btn btn-outline-danger" href="/Manager/AddStaff">Add Staff</a></li>
    <li class="nav-item"><a class=" btn btn-outline-success" href="/Auth/CustRegister">Add Customer</a></li>
    <li class="nav-item"><a class=" btn btn-outline-success" href="/Employee/PanCheck">Open an Account</a></li>
    <li class="nav-item"><a class="btn btn-outline-danger" href="/Employee/CloseAccount">Close an account</a></li>
    <li class="nav-item"><a class=" btn btn-outline-success" href="/Employee/ViewTransactions">View Transactions</a></li>
    <li class="nav-item"><a class=" btn btn-outline-secondary" href="/Employee/Withdraw">Withdraw</a></li>
    <li class="nav-item"><a class=" btn btn-outline-secondary" href="/Employee/Deposit">Deposit</a></li>
</ul>

<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <strong>Employees</strong>
            </div>
            <div class="card-body p-2">
                <div class="table-responsive">
                    <table id="employeesTable" class="table table-sm table-bordered table-striped mb-0">
                        <thead class="table-light"><tr><th>EmpID</th><th>Name</th><th>Dept</th><th>Type</th><th>PAN</th></tr></thead>
                        <tbody>
                            @foreach (var e in (IEnumerable<dynamic>)ViewBag.Employees)
                            {
                                <tr>
                                    <td>@e.Empid</td>
                                    <td>@e.Empname</td>
                                    <td>@e.Deptid</td>
                                    <td>@e.Emptype</td>
                                    <td>@e.PAN</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <nav class="mt-2" aria-label="Employees pagination">
                    <ul id="employeesPager" class="pagination pagination-sm justify-content-center mb-0"></ul>
                </nav>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <strong>Customers</strong>
            </div>
            <div class="card-body p-2">
                <div class="table-responsive">
                    <table id="customersTable" class="table table-sm table-bordered table-striped mb-0">
                        <thead class="table-light"><tr><th>CustID</th><th>Name</th><th>DOB</th><th>PAN</th></tr></thead>
                        <tbody>
                            @foreach (var c in (IEnumerable<dynamic>)ViewBag.Customers)
                            {
                                <tr>
                                    <td>@c.CustID</td>
                                    <td>@c.CustName</td>
                                    <td>@(c.DOB == null ? "" : ((DateTime)c.DOB).ToShortDateString())</td>
                                    <td>@c.PAN</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <nav class="mt-2" aria-label="Customers pagination">
                    <ul id="customersPager" class="pagination pagination-sm justify-content-center mb-0"></ul>
                </nav>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <strong>Loan Accounts</strong>
            </div>
            <div class="card-body p-2">
                <div class="table-responsive">
                    <table id="loansTable" class="table table-sm table-bordered table-striped mb-0">
                        <thead class="table-light"><tr><th>LNID</th><th>CustomerID</th><th>Amount</th><th>StartDate</th><th>EMI</th></tr></thead>
                        <tbody>
                            @foreach (var l in (IEnumerable<dynamic>)ViewBag.LoanAccounts)
                            {
                                <tr>
                                    <td>@l.LNAccountID</td>
                                    <td>@l.CustomerID</td>
                                    <td>@string.Format("{0:C}", l.LoanAmount)</td>
                                    <td>@((DateTime)l.StartDate).ToShortDateString()</td>
                                    <td>@string.Format("{0:C}", l.EMIAmount)</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <nav class="mt-2" aria-label="Loans pagination">
                    <ul id="loansPager" class="pagination pagination-sm justify-content-center mb-0"></ul>
                </nav>
            </div>
        </div>
    </div>

    <div class="col-md-6 mb-4">
        <div class="card">
            <div class="card-header">
                <strong>Fixed Deposit Accounts</strong>
            </div>
            <div class="card-body p-2">
                <div class="table-responsive">
                    <table id="fdsTable" class="table table-sm table-bordered table-striped mb-0">
                        <thead class="table-light"><tr><th>FDID</th><th>CustomerID</th><th>Amount</th><th>StartDate</th><th>EndDate</th></tr></thead>
                        <tbody>
                            @foreach (var f in (IEnumerable<dynamic>)ViewBag.FDAccounts)
                            {
                                <tr>
                                    <td>@f.FDAccountID</td>
                                    <td>@f.CustomerID</td>
                                    <td>@string.Format("{0:C}", f.DepositAmount)</td>
                                    <td>@((DateTime)f.StartDate).ToShortDateString()</td>
                                    <td>@((DateTime)f.EndDate).ToShortDateString()</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <nav class="mt-2" aria-label="FDs pagination">
                    <ul id="fdsPager" class="pagination pagination-sm justify-content-center mb-0"></ul>
                </nav>
            </div>
        </div>
    </div>
</div>
